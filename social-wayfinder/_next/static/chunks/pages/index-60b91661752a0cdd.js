(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6760:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9587)}])},9099:(e,t,a)=>{e.exports=a(8253)},9587:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(7876),l=a(9099),n=a(4232);function r(e){let{onPatientSelect:t}=e,[l,r]=(0,n.useState)([]),[i,d]=(0,n.useState)(""),[c,o]=(0,n.useState)(null),[u,m]=(0,n.useState)(!0),[x,h]=(0,n.useState)(!1),g=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.useEffect)(()=>{(async()=>{try{m(!0);let{getPatientIds:e}=await a.e(944).then(a.bind(a,944)),t=await e();r(t.patient_ids)}catch(e){o(e instanceof Error?e.message:"Failed to fetch patient IDs")}finally{m(!1)}})()},[]);let b=e=>{d(e),t(e),h(!1)};return c?(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading patients"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-red-700",children:c})]})]})}):(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"patient-select",className:"block text-sm font-medium text-gray-900 mb-2",children:"Select Patient ID"}),(0,s.jsxs)("div",{className:"relative",ref:g,children:[(0,s.jsxs)("button",{type:"button",onClick:()=>!u&&h(!x),className:"\n                        relative w-full text-left\n                        rounded-lg border-2 bg-white px-4 py-2.5 text-gray-900\n                        transition-colors duration-200\n                        ".concat(i?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200","\n                        disabled:bg-gray-50 disabled:text-gray-500 disabled:border-gray-200 disabled:cursor-not-allowed\n                        text-base sm:text-sm\n                    "),disabled:u,children:[(0,s.jsx)("span",{className:i?"text-gray-900":"text-gray-500",children:i?"Patient ".concat(i):u?"Loading patients...":"Select a patient..."}),(0,s.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2",children:(0,s.jsx)("svg",{className:"h-5 w-5 transition-transform duration-200 \n                                ".concat(i?"text-blue-500":"text-gray-400","\n                                ").concat(u?"animate-spin":"","\n                                ").concat(x?"transform rotate-180":""),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:u?(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 8a6 6 0 1112 0c0 1.017-.07 2.019-.203 3h-2.113c.144-.82.22-1.669.22-2.537a4.5 4.5 0 00-9 0c0 .868.076 1.717.22 2.537H3.203A24.25 24.25 0 014 8z",clipRule:"evenodd"}):(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),x&&!u&&(0,s.jsx)("div",{className:"absolute z-10 mt-1 w-full rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 max-h-60 overflow-auto",children:(0,s.jsxs)("div",{className:"py-1",children:[l.map(e=>(0,s.jsxs)("button",{onClick:()=>b(e),className:"\n                                        w-full text-left px-4 py-2 text-sm\n                                        ".concat(i===e?"bg-blue-100 text-blue-900":"text-gray-900 hover:bg-gray-100","\n                                    "),children:["Patient ",e]},e)),0===l.length&&(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No patients available"})]})})]})]})}function i(e){let{patientId:t,onTimestampSelect:l}=e,[r,i]=(0,n.useState)([]),[d,c]=(0,n.useState)(""),[o,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),b=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{b.current&&!b.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.useEffect)(()=>{(async()=>{if(!t){i([]),c("");return}try{x(!0);let{getPatientTimestamps:e}=await a.e(944).then(a.bind(a,944)),s=await e(t);i(s.timestamps),c("")}catch(e){u(e instanceof Error?e.message:"Failed to fetch timestamps")}finally{x(!1)}})()},[t]);let p=e=>{c(e),l(e),g(!1)},f=e=>new Date(e).toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return t?o?(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading timestamps"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-red-700",children:o})]})]})}):(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"timestamp-select",className:"block text-sm font-medium text-gray-900 mb-2",children:"Select Note Date"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"The summary will be generated using this note and all previous notes for this patient."}),(0,s.jsxs)("div",{className:"relative",ref:b,children:[(0,s.jsxs)("button",{type:"button",onClick:()=>!m&&g(!h),className:"\n                            relative w-full text-left\n                            rounded-lg border-2 bg-white px-4 py-2.5 text-gray-900\n                            transition-colors duration-200\n                            ".concat(d?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200","\n                            disabled:bg-gray-50 disabled:text-gray-500 disabled:border-gray-200 disabled:cursor-not-allowed\n                            text-base sm:text-sm\n                        "),disabled:m,children:[(0,s.jsx)("span",{className:d?"text-gray-900":"text-gray-500",children:d?f(d):m?"Loading dates...":"Select a date..."}),(0,s.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2",children:(0,s.jsx)("svg",{className:"h-5 w-5 transition-transform duration-200 \n                                    ".concat(d?"text-blue-500":"text-gray-400","\n                                    ").concat(m?"animate-spin":"","\n                                    ").concat(h?"transform rotate-180":""),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:m?(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 8a6 6 0 1112 0c0 1.017-.07 2.019-.203 3h-2.113c.144-.82.22-1.669.22-2.537a4.5 4.5 0 00-9 0c0 .868.076 1.717.22 2.537H3.203A24.25 24.25 0 014 8z",clipRule:"evenodd"}):(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h&&!m&&(0,s.jsx)("div",{className:"absolute z-10 mt-1 w-full rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 max-h-60 overflow-auto",children:(0,s.jsxs)("div",{className:"py-1",children:[r.map(e=>(0,s.jsx)("button",{onClick:()=>p(e),className:"\n                                            w-full text-left px-4 py-2 text-sm\n                                            ".concat(d===e?"bg-blue-100 text-blue-900":"text-gray-900 hover:bg-gray-100","\n                                        "),children:f(e)},e)),0===r.length&&(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No dates available"})]})})]})]})}):null}let d=()=>{let[e,t]=(0,n.useState)(null),[a,d]=(0,n.useState)(""),c=(0,l.useRouter)(),o=async t=>{t.preventDefault(),e&&a&&await c.push({pathname:"./patient/".concat(e),query:{timestamps:[a]}})},u=!e||!a;return(0,s.jsxs)("div",{className:"max-w-3xl mx-auto mt-10 bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Patient Summary Generator"}),(0,s.jsxs)("form",{onSubmit:o,className:"space-y-6",children:[(0,s.jsx)(r,{onPatientSelect:e=>{t(e),d("")}}),e&&(0,s.jsx)(i,{patientId:e,onTimestampSelect:d}),(0,s.jsxs)("div",{className:"pt-4",children:[(0,s.jsx)("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white\n              ".concat(u?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),children:"Generate Summary"}),u&&(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500 text-center",children:e?"Select a note date to generate summary":"Select a patient to generate summary"})]})]})]})};function c(){return(0,s.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Social Services Notes Viewer"}),(0,s.jsx)(d,{})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6760)),_N_E=e.O()}]);