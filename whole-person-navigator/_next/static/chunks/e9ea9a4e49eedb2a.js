(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,i)=>{t.exports=e.r(76562)},56352,e=>{"use strict";var t=e.i(43476),i=e.i(71645),s=e.i(22016);let a=["diabetes","cardiovascular","heart disease","heart failure","hypertension","HIV","AIDS","high-risk pregnancy","gestational diabetes","renal disease","kidney disease","cancer","COPD"];var r=e.i(18566);let n=[{patient:{id:"patient-a",firstName:"Marcus",lastName:"Thompson",dateOfBirth:"1978-03-15",mrn:"MRN-2024-001",mediCalPlan:"L.A. Care Health Plan",primaryCareProvider:"Dr. Sarah Chen",referringProvider:"Dr. Michael Rodriguez",demographics:{age:46,gender:"Male",race:"Black/African American",ethnicity:"Non-Hispanic",language:"English",address:"Currently unhoused - Downtown Los Angeles area",phone:"(213) 555-0147"}},notes:[{id:"note-a1",date:"2024-01-15",type:"ED Visit",provider:"Dr. Amanda Foster",content:"46 y/o male presents to ED with cellulitis of left lower extremity. Patient reports he has been living on the streets for the past 8 months after losing his apartment. States he has been using methamphetamine intermittently, last use 3 days ago. Has Type 2 diabetes, last A1c was 9.2%. Reports difficulty managing diabetes while homeless - no refrigeration for insulin, inconsistent meals. Patient states he sometimes goes to food banks but often misses meals. Wound appears infected, likely from sleeping outdoors. Will admit for IV antibiotics. Social work consult placed."},{id:"note-a2",date:"2024-01-16",type:"Social Work Note",provider:"Maria Santos, LCSW",content:"Met with patient on medical floor. Patient has been experiencing homelessness since May 2023. Previously worked as a warehouse supervisor but lost job due to substance use. Reports using methamphetamine for approximately 2 years, initially to stay awake for work, now dependent. Has tried to quit multiple times without success. No family support - estranged from siblings, parents deceased. Patient is interested in substance use treatment but worried about where he would stay during recovery. Currently receives CalFresh benefits but reports they are insufficient. Discussed shelter options and SUD treatment programs. Patient expressed interest in residential treatment if housing could be arranged. Will coordinate with ECM team."},{id:"note-a3",date:"2024-01-17",type:"Care Coordination Note",provider:"Janet Williams, RN Care Manager",content:"Patient has had 6 ED visits in the past 6 months, primarily for complications related to diabetes and wounds. Pattern suggests difficulty managing chronic conditions while homeless. Patient reports he cannot afford his diabetes medications consistently and often rations insulin. Food insecurity contributing to poor glycemic control - patient admits to eating whatever is available, often high in carbohydrates. Transportation is also a barrier - patient walks or takes bus to appointments when he has fare money. Recommend referral to ECM program given homelessness, high ED utilization, and SUD. Also recommend referral to Food is Medicine program given diabetes and food insecurity."}],risks:[{domain:"housing",severity:"high",summary:"Currently experiencing homelessness for 8+ months, living on streets",citations:[{text:"Patient reports he has been living on the streets for the past 8 months after losing his apartment",noteDate:"2024-01-15",noteType:"ED Visit"},{text:"Patient has been experiencing homelessness since May 2023",noteDate:"2024-01-16",noteType:"Social Work Note"}],recommendations:["Refer to ECM program for intensive care coordination","Connect with Housing for Health program","Explore recuperative care/medical respite options","Coordinate with homeless outreach team"]},{domain:"substance_use",severity:"high",summary:"Active methamphetamine use disorder, using for 2 years, interested in treatment",citations:[{text:"States he has been using methamphetamine intermittently, last use 3 days ago",noteDate:"2024-01-15",noteType:"ED Visit"},{text:"Reports using methamphetamine for approximately 2 years, initially to stay awake for work, now dependent",noteDate:"2024-01-16",noteType:"Social Work Note"}],recommendations:["Refer to residential SUD treatment program","Consider MAT evaluation","Connect with peer support specialist","Coordinate housing with treatment (recovery bridge housing)"]},{domain:"food_insecurity",severity:"high",summary:"Food insecurity affecting diabetes management, relies on food banks, misses meals",citations:[{text:"Patient states he sometimes goes to food banks but often misses meals",noteDate:"2024-01-15",noteType:"ED Visit"},{text:"Currently receives CalFresh benefits but reports they are insufficient",noteDate:"2024-01-16",noteType:"Social Work Note"},{text:"Food insecurity contributing to poor glycemic control - patient admits to eating whatever is available",noteDate:"2024-01-17",noteType:"Care Coordination Note"}],recommendations:["Refer to Food Pharmacy / Medically Tailored Meals program","Maximize CalFresh benefits","Connect with diabetes-friendly meal programs","Provide list of food banks in patient's area"]},{domain:"financial_strain",severity:"high",summary:"Cannot afford medications, unemployed, limited income",citations:[{text:"Patient reports he cannot afford his diabetes medications consistently and often rations insulin",noteDate:"2024-01-17",noteType:"Care Coordination Note"},{text:"Previously worked as a warehouse supervisor but lost job due to substance use",noteDate:"2024-01-16",noteType:"Social Work Note"}],recommendations:["Connect with pharmacy assistance programs","Ensure Medi-Cal coverage is active","Explore SSI/SSDI eligibility","Connect with employment services after stabilization"]},{domain:"social_isolation",severity:"moderate",summary:"Estranged from family, limited social support",citations:[{text:"No family support - estranged from siblings, parents deceased",noteDate:"2024-01-16",noteType:"Social Work Note"}],recommendations:["Connect with peer support services","Explore community support groups","Consider case management for ongoing support"]},{domain:"transportation",severity:"moderate",summary:"Relies on walking or bus, often lacks fare money",citations:[{text:"Transportation is also a barrier - patient walks or takes bus to appointments when he has fare money",noteDate:"2024-01-17",noteType:"Care Coordination Note"}],recommendations:["Arrange Medi-Cal Non-Emergency Medical Transportation (NEMT)","Provide bus tokens for appointments","Schedule appointments near patient's location when possible"]}],eligibility:[],ecmPopulations:["homeless","serious_mental_health_sud","high_ed_utilization"]},{patient:{id:"patient-b",firstName:"Dorothy",lastName:"Chen",dateOfBirth:"1941-07-22",mrn:"MRN-2024-002",mediCalPlan:"Health Net",primaryCareProvider:"Dr. James Liu",referringProvider:"Dr. James Liu",demographics:{age:83,gender:"Female",race:"Asian",ethnicity:"Non-Hispanic",language:"Cantonese (English limited)",address:"1847 Grant Ave, Apt 3B, San Francisco, CA 94133",phone:"(415) 555-0892"}},notes:[{id:"note-b1",date:"2024-01-10",type:"Office Visit",provider:"Dr. James Liu",content:"83 y/o Cantonese-speaking female with history of Type 2 diabetes, CHF, hypertension, and mild dementia presents for routine follow-up. Patient accompanied by neighbor who helps with translation. Daughter passed away 2 years ago, patient lives alone and appears to be struggling. Neighbor reports patient has been losing weight and may not be eating regularly. A1c today is 8.4%, down from 8.9%. Patient reports difficulty preparing meals due to arthritis in hands. Also reports falls x2 in past month, once in bathroom and once in kitchen. Patient needs help with bathing and dressing due to arthritis and balance issues. Concern for safety living alone. Will refer to home health for assessment."},{id:"note-b2",date:"2024-01-18",type:"Home Health Evaluation",provider:"Susan Park, RN, Home Health",content:"Home visit completed. Patient lives alone in rent-controlled apartment, building has elevator. Apartment is cluttered with fall hazards (rugs, cords). Patient required assistance with bathing - has grab bars but still unsteady. Cannot manage buttons or zippers due to severe arthritis, needs help dressing. Patient can feed herself but has difficulty preparing meals - relies on frozen dinners or neighbor bringing food. Refrigerator contained mostly expired items. Patient takes 8 medications, pill organizer present but found missed doses. Patient is oriented to person and place, but confused about date and some medications. IHSS referral strongly recommended for personal care assistance. Patient at risk for long-term care placement without in-home support. Daughter was previous caregiver, patient has been declining since her death."},{id:"note-b3",date:"2024-01-20",type:"Care Conference Note",provider:"Amy Tran, RN Care Manager",content:"Care conference held with PCP, home health, and social work. Patient meets criteria for IHSS based on need for assistance with ADLs (bathing, dressing, meal preparation). Also meets criteria for ECM given risk for institutionalization - patient will likely need SNF placement without adequate community support. Discussed Medically Tailored Meals program given diabetes, CHF, and inability to prepare meals. Patient's neighbor has been providing informal support but works during the day. Need to arrange formal IHSS caregiver. Language barrier is significant - will need Cantonese-speaking providers when possible. Transportation arranged through Medi-Cal NEMT for future appointments."}],risks:[{domain:"social_isolation",severity:"high",summary:"Lives alone, daughter deceased, limited English, relies on neighbor",citations:[{text:"Daughter passed away 2 years ago, patient lives alone and appears to be struggling",noteDate:"2024-01-10",noteType:"Office Visit"},{text:"Daughter was previous caregiver, patient has been declining since her death",noteDate:"2024-01-18",noteType:"Home Health Evaluation"}],recommendations:["Connect with senior center with Cantonese programs","Explore adult day health program","Consider friendly visitor program","Grief counseling referral"]},{domain:"safety_concerns",severity:"high",summary:"Fall risk - 2 falls in past month, home hazards identified",citations:[{text:"Reports falls x2 in past month, once in bathroom and once in kitchen",noteDate:"2024-01-10",noteType:"Office Visit"},{text:"Apartment is cluttered with fall hazards (rugs, cords)",noteDate:"2024-01-18",noteType:"Home Health Evaluation"}],recommendations:["Home safety evaluation and modifications","Physical therapy for balance and strength","Medical alert system","Remove throw rugs and trip hazards"]},{domain:"medical_equipment",severity:"moderate",summary:"May benefit from additional assistive devices for safety",citations:[{text:"Has grab bars but still unsteady",noteDate:"2024-01-18",noteType:"Home Health Evaluation"}],recommendations:["Evaluate for walker or rollator","Shower chair/bench","Additional grab bars","Raised toilet seat"]}],eligibility:[],ecmPopulations:["ltc_risk"]},{patient:{id:"patient-c",firstName:"Jasmine",lastName:"Williams",dateOfBirth:"1996-11-08",mrn:"MRN-2024-003",mediCalPlan:"Molina Healthcare",primaryCareProvider:"Dr. Patricia Green",referringProvider:"Dr. Rachel Martinez",demographics:{age:28,gender:"Female",race:"Black/African American",ethnicity:"Non-Hispanic",language:"English",address:"Staying with friend at 2341 Martin Luther King Jr Blvd, Oakland, CA 94612",phone:"(510) 555-0234"}},notes:[{id:"note-c1",date:"2024-01-08",type:"Postpartum Visit",provider:"Dr. Rachel Martinez",content:"28 y/o G2P2 Black female, 4 weeks postpartum after uncomplicated vaginal delivery. History of gestational diabetes this pregnancy, resolved after delivery. Patient appears tired and tearful. Reports difficulty breastfeeding, baby not latching well. When asked about home situation, patient became emotional and disclosed she is currently staying with a friend because she had to leave her apartment last month due to domestic violence from baby's father. Has been couch surfing with 4-week-old infant and 3-year-old daughter. Screened positive on Edinburgh Postnatal Depression Scale (score 14). Patient reports feeling overwhelmed and worried about where she will live. Friend can only host her for another 2 weeks. Patient has not been able to focus on her own recovery or nutrition. Referred to lactation consultant, social work, and mental health."},{id:"note-c2",date:"2024-01-12",type:"Social Work Note",provider:"Keisha Johnson, LCSW",content:"Met with patient at clinic. Patient fled domestic violence situation 5 weeks ago when partner became physically violent during pregnancy. Has not filed police report, afraid of retaliation. Currently staying with friend in small 1-bedroom apartment with her 2 children. No family in the area - mother lives in Texas, relationship is strained. Patient is enrolled in CalFresh and WIC but reports difficulty getting to WIC appointments and preparing meals while caring for newborn. Has not been eating well - skipping meals to ensure children have food. Patient is not working currently, was doing gig economy work before pregnancy. Applied for CalWORKs, pending. Discussed emergency DV shelter options but patient reluctant to enter shelter with children. Will connect with rapid rehousing program for DV survivors. Patient meets criteria for birth equity population given racial disparities in maternal outcomes and current psychosocial stressors."},{id:"note-c3",date:"2024-01-19",type:"Care Coordination Note",provider:"Dr. Patricia Green",content:"Care coordination call with patient. Housing situation remains unstable - friend has asked her to leave by end of month. Patient's postpartum depression symptoms are worsening. Started on sertraline 50mg, safe for breastfeeding. Lactation is improving with support. Baby's weight gain is appropriate. Patient reports she is unable to care for herself adequately while managing newborn and toddler alone - needs help with meal preparation, basic household tasks, and self-care. Depression affecting her ability to complete daily activities. Concern about patient's nutrition - reported eating mostly fast food and whatever is convenient due to chaos of current living situation. Given history of gestational diabetes, patient at high risk for developing Type 2 diabetes, especially with poor nutrition. Recommend Medically Tailored Meals or food support program. ECM referral submitted given birth equity population with multiple social risk factors. Priority is securing stable housing. Patient expressed fear about safety if ex-partner finds her location."}],risks:[{domain:"housing",severity:"high",summary:"Housing unstable after fleeing DV, couch surfing with 2 children, must leave current location soon",citations:[{text:"Currently staying with a friend because she had to leave her apartment last month due to domestic violence",noteDate:"2024-01-08",noteType:"Postpartum Visit"},{text:"Has been couch surfing with 4-week-old infant and 3-year-old daughter",noteDate:"2024-01-08",noteType:"Postpartum Visit"},{text:"Housing situation remains unstable - friend has asked her to leave by end of month",noteDate:"2024-01-19",noteType:"Care Coordination Note"}],recommendations:["Connect with rapid rehousing for DV survivors","Explore transitional housing programs","CalWORKs homeless assistance","Section 8 emergency voucher application"]},{domain:"safety_concerns",severity:"high",summary:"Fled domestic violence, ongoing fear of ex-partner",citations:[{text:"Patient fled domestic violence situation 5 weeks ago when partner became physically violent during pregnancy",noteDate:"2024-01-12",noteType:"Social Work Note"},{text:"Patient expressed fear about safety if ex-partner finds her location",noteDate:"2024-01-19",noteType:"Care Coordination Note"}],recommendations:["Safety planning with DV advocate","Information about restraining order","Connect with DV support services","Confidential address program enrollment"]},{domain:"food_insecurity",severity:"moderate",summary:"Skipping meals, eating fast food, difficulty accessing WIC",citations:[{text:"Has not been eating well - skipping meals to ensure children have food",noteDate:"2024-01-12",noteType:"Social Work Note"},{text:"Reported eating mostly fast food and whatever is convenient due to chaos of current living situation",noteDate:"2024-01-19",noteType:"Care Coordination Note"}],recommendations:["Maximize WIC benefits - arrange transportation to appointments","Medically Tailored Meals given gestational diabetes history","Food bank referrals in current area","CalFresh expedited processing"]},{domain:"social_isolation",severity:"moderate",summary:"No family locally, strained relationship with mother, needs help with daily activities",citations:[{text:"No family in the area - mother lives in Texas, relationship is strained",noteDate:"2024-01-12",noteType:"Social Work Note"},{text:"Patient reports she is unable to care for herself adequately while managing newborn and toddler alone - needs help with meal preparation, basic household tasks, and self-care",noteDate:"2024-01-19",noteType:"Care Coordination Note"}],recommendations:["Connect with new mother support groups","Home visiting program (Nurse-Family Partnership)","Peer support for DV survivors","Community resources for single mothers","IHSS referral for in-home assistance"]},{domain:"financial_strain",severity:"moderate",summary:"Not working, CalWORKs pending, limited income",citations:[{text:"Patient is not working currently, was doing gig economy work before pregnancy. Applied for CalWORKs, pending",noteDate:"2024-01-12",noteType:"Social Work Note"}],recommendations:["Follow up on CalWORKs application","Explore childcare assistance for return to work","SSI for children if applicable","Emergency assistance funds"]}],eligibility:[],ecmPopulations:["birth_equity"]},{patient:{id:"patient-d",firstName:"Robert",lastName:"Garcia",dateOfBirth:"1985-02-28",mrn:"MRN-2024-004",mediCalPlan:"CalOptima",primaryCareProvider:"Dr. David Kim",referringProvider:"Dr. Linda Nguyen",demographics:{age:39,gender:"Male",race:"Hispanic/Latino",ethnicity:"Mexican",language:"English, Spanish",address:"1523 Harbor Blvd, Apt 12, Santa Ana, CA 92704",phone:"(714) 555-0567"}},notes:[{id:"note-d1",date:"2024-01-05",type:"ED Visit",provider:"Dr. Linda Nguyen",content:"39 y/o male brought to ED by police on 5150 hold after found on street yelling at people and appearing confused. Patient has history of schizophrenia and bipolar disorder. Per patient's mother (contacted by phone), patient stopped taking medications about 3 weeks ago because he felt they were poisoning him. Patient is disheveled, malodorous, and appears to have lost significant weight. Labs show dehydration and mild malnutrition. Patient reports he has been staying in his apartment but barely leaving, not eating much because he believes food is contaminated. Mother reports patient was unable to care for himself during this episode - not bathing, not eating, apartment in disarray. Patient needs assistance with meal preparation, medication management, and personal hygiene during decompensation periods. This is patient's 7th ED visit in the past 6 months, primarily for psychiatric decompensation. Patient will be admitted to psychiatric unit for stabilization."},{id:"note-d2",date:"2024-01-12",type:"Psychiatric Discharge Summary",provider:"Dr. William Park, Psychiatrist",content:"Patient stabilized on psychiatric unit over 7 days. Restarted on risperidone 4mg daily and lithium 900mg daily with good response. Patient now denies paranoid ideation about medications or food. Insight improved. Discharge diagnosis: Schizoaffective disorder, bipolar type. Patient lives alone in apartment, mother lives nearby and is supportive but works full-time. Patient receives SSI and has Medi-Cal. Lost his part-time job during this decompensation episode. History notable for multiple psychiatric hospitalizations (4 in past 2 years) and ED visits. Pattern of medication non-adherence leading to decompensation. Patient agreeable to intensive outpatient program and ACT team referral. Discussed long-acting injectable antipsychotic but patient declined for now. Critical to ensure close follow-up to prevent readmission."},{id:"note-d3",date:"2024-01-18",type:"PCP Follow-up",provider:"Dr. David Kim",content:"Post-hospitalization follow-up. Patient appears much improved, taking medications as prescribed. Weight today 158 lbs, down from usual weight of 175 lbs - significant weight loss during decompensation period. Mother present and engaged in care. Patient reports he is eating better now but still has limited appetite. Discussed importance of nutrition and regular meals. Patient has history of being isolated when unwell - during recent episode, he did not answer door or phone for weeks. Mother discovered situation when she became worried and let herself in with spare key. Plan: Continue psychiatric medications, weekly check-ins with ACT team, PCP follow-up in 2 weeks. ECM referral indicated given serious mental illness with high utilization pattern. Will monitor weight and nutrition."}],risks:[{domain:"substance_use",severity:"low",summary:"No current substance use identified, psychiatric condition is primary",citations:[],recommendations:[]},{domain:"social_isolation",severity:"high",summary:"Lives alone, isolates when decompensating, needs assistance with daily activities during episodes",citations:[{text:"Patient lives alone in apartment, mother lives nearby and is supportive but works full-time",noteDate:"2024-01-12",noteType:"Psychiatric Discharge Summary"},{text:"Patient has history of being isolated when unwell - during recent episode, he did not answer door or phone for weeks",noteDate:"2024-01-18",noteType:"PCP Follow-up"},{text:"Mother reports patient was unable to care for himself during this episode - not bathing, not eating, apartment in disarray. Patient needs assistance with meal preparation, medication management, and personal hygiene during decompensation periods",noteDate:"2024-01-05",noteType:"ED Visit"}],recommendations:["ACT team engagement for regular check-ins","Consider peer support specialist","Day program or clubhouse model for socialization","Regular welfare checks during high-risk periods","IHSS referral for in-home assistance during high-risk periods"]},{domain:"food_insecurity",severity:"moderate",summary:"Not eating well during psychiatric episodes, significant weight loss",citations:[{text:"Patient reports he has been staying in his apartment but barely leaving, not eating much because he believes food is contaminated",noteDate:"2024-01-05",noteType:"ED Visit"},{text:"Weight today 158 lbs, down from usual weight of 175 lbs - significant weight loss during decompensation period",noteDate:"2024-01-18",noteType:"PCP Follow-up"}],recommendations:["Nutrition support during recovery","Consider meal delivery during high-risk periods","Monitor weight at each visit","Engage mother in ensuring adequate nutrition"]},{domain:"financial_strain",severity:"moderate",summary:"Lost job during decompensation, relies on SSI",citations:[{text:"Lost his part-time job during this decompensation episode",noteDate:"2024-01-12",noteType:"Psychiatric Discharge Summary"},{text:"Patient receives SSI and has Medi-Cal",noteDate:"2024-01-12",noteType:"Psychiatric Discharge Summary"}],recommendations:["Supported employment services when stable","Benefits counseling to maximize SSI","Vocational rehabilitation referral","Financial management support if needed"]}],eligibility:[],ecmPopulations:["serious_mental_health_sud","high_ed_utilization"]}];function o({currentPatientId:e}){let i=(0,r.useRouter)(),s=n.map(e=>({id:e.patient.id,name:`${e.patient.firstName} ${e.patient.lastName}`,mrn:e.patient.mrn,age:e.patient.demographics.age,primaryRisks:e.risks.filter(e=>"high"===e.severity).map(e=>e.domain)}));return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("label",{htmlFor:"patient-select",className:"text-sm font-medium text-gray-700",children:"Select Patient:"}),(0,t.jsxs)("select",{id:"patient-select",value:e||"",onChange:e=>{let t=e.target.value;t&&i.push(`/patient/${t}`)},className:"block w-64 rounded-md border border-gray-300 bg-white px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Choose a patient..."}),s.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.mrn,")"]},e.id))]})]})}let l={housing:{id:"housing",name:"Housing Instability",description:"Issues related to housing security, homelessness, or unsafe living conditions",icon:"ðŸ ",color:"orange",keywords:["homeless","shelter","eviction","housing","unhoused","street","tent","unstable housing","couch surfing"]},transportation:{id:"transportation",name:"Transportation Barriers",description:"Difficulty accessing reliable transportation for medical appointments",icon:"ðŸš—",color:"blue",keywords:["transportation","no car","bus","ride","cannot drive","no license","mobility"]},substance_use:{id:"substance_use",name:"Substance Use",description:"Alcohol or drug use affecting health and wellbeing",icon:"âš ï¸",color:"red",keywords:["alcohol","drug","substance","opioid","methamphetamine","fentanyl","heroin","cocaine","marijuana","drinking","using","SUD","addiction"]},medical_equipment:{id:"medical_equipment",name:"Medical Equipment Needs",description:"Needs for durable medical equipment or assistive devices",icon:"ðŸ¥",color:"purple",keywords:["wheelchair","walker","oxygen","CPAP","hospital bed","DME","medical equipment","assistive device"]},food_insecurity:{id:"food_insecurity",name:"Food Insecurity",description:"Limited or uncertain access to adequate food",icon:"ðŸŽ",color:"green",keywords:["food stamps","SNAP","CalFresh","food bank","hungry","nutrition","missed meals","food insecurity","not eating","skipping meals"]},financial_strain:{id:"financial_strain",name:"Financial Strain",description:"Difficulty affording basic needs or medical care",icon:"ðŸ’°",color:"yellow",keywords:["bills","debt","utilities","rent","afford","SSI","disability income","cannot pay","financial","money problems"]},social_isolation:{id:"social_isolation",name:"Social Isolation",description:"Limited social support or connections",icon:"ðŸ‘¤",color:"gray",keywords:["lives alone","no family","no support","isolated","lonely","limited contacts","no visitors","widowed","estranged"]},safety_concerns:{id:"safety_concerns",name:"Safety Concerns",description:"Domestic violence, abuse, or unsafe environment",icon:"ðŸ›¡ï¸",color:"red",keywords:["DV","domestic violence","abuse","unsafe","APS","elder abuse","neglect","IPV","intimate partner","assault"]}},d={homeless:{id:"homeless",name:"Experiencing Homelessness",description:"Individuals currently experiencing homelessness or housing instability"},high_ed_utilization:{id:"high_ed_utilization",name:"High ED/Hospital Utilization",description:"5+ ED visits in 6 months OR 3+ hospital admissions indicating risk for avoidable utilization"},serious_mental_health_sud:{id:"serious_mental_health_sud",name:"Serious Mental Health/SUD",description:"Adults with serious mental illness or substance use disorder requiring intensive support"},transitioning_incarceration:{id:"transitioning_incarceration",name:"Transitioning from Incarceration",description:"Individuals transitioning from incarceration within 90 days"},ltc_risk:{id:"ltc_risk",name:"At Risk for LTC Institutionalization",description:"Individuals at risk for institutionalization in long-term care facility"},nursing_facility_transition:{id:"nursing_facility_transition",name:"Nursing Facility Transition",description:"Nursing facility residents transitioning to community living"},child_welfare:{id:"child_welfare",name:"Child Welfare Involved",description:"Children/youth involved in child welfare system"},birth_equity:{id:"birth_equity",name:"Birth Equity Population",description:"Pregnant or postpartum individuals experiencing racial/ethnic disparities in outcomes"}};function c({severity:e}){let i={high:"bg-red-100 text-red-800 border-red-200",moderate:"bg-yellow-100 text-yellow-800 border-yellow-200",low:"bg-green-100 text-green-800 border-green-200"}[e]||"bg-gray-100 text-gray-800 border-gray-200";return(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full border ${i} font-medium`,children:e.charAt(0).toUpperCase()+e.slice(1)})}function m({risk:e}){let[s,a]=(0,i.useState)(!1),r=l[e.domain],n={high:"border-l-red-500",moderate:"border-l-yellow-500",low:"border-l-green-500"}[e.severity]||"border-l-gray-300";return(0,t.jsxs)("div",{className:`bg-white rounded-lg border border-gray-200 border-l-4 ${n} shadow-sm overflow-hidden`,children:[(0,t.jsxs)("button",{onClick:()=>a(!s),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:r.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:r.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600 mt-0.5",children:e.summary})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c,{severity:e.severity}),(0,t.jsx)("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${s?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),s&&(0,t.jsxs)("div",{className:"px-4 pb-4 border-t border-gray-100",children:[e.citations.length>0&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Source Citations"}),(0,t.jsx)("div",{className:"space-y-2",children:e.citations.map((e,i)=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-md p-3 text-sm",children:[(0,t.jsxs)("p",{className:"text-gray-700 italic",children:['"',e.text,'"']}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.noteType," - ",e.noteDate]})]},i))})]}),e.recommendations.length>0&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recommendations"}),(0,t.jsx)("ul",{className:"space-y-1",children:e.recommendations.map((e,i)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"text-blue-500 mt-0.5",children:"â†’"}),e]},i))})]})]})]})}function p({risks:e}){let i=[...e].sort((e,t)=>{let i={high:0,moderate:1,low:2};return i[e.severity]-i[t.severity]}).filter(e=>e.citations.length>0||e.summary),s=i.filter(e=>"high"===e.severity).length,a=i.filter(e=>"moderate"===e.severity).length;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Social Risk Assessment"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[s>0&&(0,t.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full",children:[s," High"]}),a>0&&(0,t.jsxs)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded-full",children:[a," Moderate"]})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,t.jsx)(m,{risk:e},e.domain))}),0===i.length&&(0,t.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No social risks identified."})]})}let u={ecm:{name:"ECM",fullName:"Enhanced Care Management",description:"Intensive care coordination for high-need Medi-Cal members",color:"blue"},ihss:{name:"IHSS",fullName:"In-Home Supportive Services",description:"In-home care assistance for daily living activities",color:"purple"},snap_benefits:{name:"SNAP Benefits",fullName:"Supplemental Nutrition Assistance Program",description:"Food assistance for low-income individuals and families",color:"green"}};function h({eligibility:e,onGenerateReferral:s}){let[a,r]=(0,i.useState)(null),n=e.filter(e=>e.eligible),o=e.filter(e=>!e.eligible);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Program Eligibility"}),n.length>0&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Eligible Programs"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Click to expand and generate pre-filled referral forms"})]}),n.map(e=>{let i=u[e.program],n=a===e.program;return(0,t.jsxs)("div",{className:`rounded-lg border-2 ${function(e,t){if(!t)return"bg-gray-100 text-gray-500 border-gray-200";switch(e){case"ecm":return"bg-blue-50 text-blue-700 border-blue-200";case"ihss":return"bg-purple-50 text-purple-700 border-purple-200";case"snap_benefits":return"bg-green-50 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}}(e.program,!0)} overflow-hidden`,children:[(0,t.jsxs)("button",{onClick:()=>r(n?null:e.program),className:"w-full px-4 py-3 flex items-center justify-between text-left",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-white shadow-sm",children:["ecm"===e.program&&"ðŸ“‹","ihss"===e.program&&"ðŸ ","snap_benefits"===e.program&&"ðŸŽ"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:i.name}),(0,t.jsx)("div",{className:"text-xs opacity-75",children:i.fullName})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:`text-xs px-2 py-1 rounded-full ${function(e){switch(e){case"high":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}(e.confidence)}`,children:[e.confidence," confidence"]}),(0,t.jsx)("svg",{className:`w-5 h-5 transition-transform ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),n&&(0,t.jsx)("div",{className:"px-4 pb-4 border-t border-current/10",children:(0,t.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"text-sm font-medium mb-1",children:"Qualifying Factors:"}),(0,t.jsx)("ul",{className:"text-sm space-y-1",children:e.qualifyingFactors.map((e,i)=>(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-600 mt-0.5",children:"âœ“"}),e]},i))})]}),e.supportingEvidence.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"text-sm font-medium mb-1",children:"Supporting Evidence:"}),(0,t.jsx)("ul",{className:"text-sm space-y-1 text-gray-600",children:e.supportingEvidence.slice(0,3).map((e,i)=>(0,t.jsxs)("li",{className:"italic text-xs",children:['"',e.substring(0,100),'..."']},i))})]}),s&&(0,t.jsxs)("button",{onClick:()=>s(e.program),className:"mt-2 w-full px-4 py-2 bg-white rounded-md border border-current/20 font-medium text-sm hover:bg-gray-50 transition-colors",children:["Generate ",i.name," Referral"]})]})})]},e.program)})]}),o.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-500",children:"Not Currently Eligible"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map(e=>{let i=u[e.program];return(0,t.jsx)("div",{className:"px-3 py-2 rounded-lg bg-gray-50 border border-gray-200 text-gray-500 text-sm",children:i.name},e.program)})})]})]})}function g({risks:e}){let i=[];e.forEach(e=>{let t=l[e.domain];e.recommendations.forEach(s=>{i.push({recommendation:s,domain:e.domain,domainName:t.name,severity:e.severity})})}),i.sort((e,t)=>{let i={high:0,moderate:1,low:2};return(i[e.severity]||2)-(i[t.severity]||2)});let s=i.filter(e=>"high"===e.severity).slice(0,5),a=i.filter(e=>"moderate"===e.severity).slice(0,3),r=i.filter(e=>"low"===e.severity),n=(e,i)=>0===e.length?null:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:{high:"High Priority",medium:"Medium Priority",low:"Lower Priority"}[i]}),(0,t.jsx)("div",{className:`border-l-4 ${{high:"border-l-red-500 bg-red-50",medium:"border-l-yellow-500 bg-yellow-50",low:"border-l-green-500 bg-green-50"}[i]} rounded-r-lg p-4`,children:(0,t.jsx)("ul",{className:"space-y-2",children:e.map((e,i)=>(0,t.jsxs)("li",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-white border border-gray-300 flex items-center justify-center text-xs text-gray-500",children:i+1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-800",children:e.recommendation}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["Related to: ",e.domainName]})]})]},i))})})]});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Action Recommendations"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[i.length," total actions"]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[n(s,"high"),n(a,"medium"),n(r,"low")]}),0===i.length&&(0,t.jsx)("p",{className:"text-gray-500 text-sm italic",children:"No recommendations available."})]})}function x({patientData:e,onClose:s}){let a=(0,i.useRef)(null),{patient:r,risks:n,ecmPopulations:o}=e,[l,c]=(0,i.useState)({patientName:`${r.lastName}, ${r.firstName}`,dob:r.dateOfBirth,mrn:r.mrn,mediCalPlan:r.mediCalPlan,mediCalId:r.mrn,phone:r.demographics.phone,address:r.demographics.address,language:r.demographics.language,referringProvider:r.referringProvider,referringProviderPhone:"(555) 123-4567",referringProviderFax:"(555) 123-4568",referralDate:new Date().toISOString().split("T")[0],populationsOfFocus:o,additionalNotes:""}),m=n.filter(e=>"high"===e.severity||"moderate"===e.severity).flatMap(e=>e.citations.map(e=>e.text)).slice(0,5),p=n.filter(e=>"high"===e.severity||"moderate"===e.severity).map(e=>e.summary),u=(e,t)=>{c(i=>({...i,[e]:t}))},h=()=>{window.print()};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,t.jsxs)("div",{ref:a,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"ECM Referral Form"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Enhanced Care Management Program Referral"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2","data-print-hidden":!0,children:[(0,t.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"Print / Save PDF"}),s&&(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm font-medium",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Patient Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name"}),(0,t.jsx)("input",{type:"text",value:l.patientName,onChange:e=>u("patientName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,t.jsx)("input",{type:"date",value:l.dob,onChange:e=>u("dob",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MRN"}),(0,t.jsx)("input",{type:"text",value:l.mrn,onChange:e=>u("mrn",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medi-Cal ID"}),(0,t.jsx)("input",{type:"text",value:l.mediCalId,onChange:e=>u("mediCalId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medi-Cal Managed Care Plan"}),(0,t.jsx)("input",{type:"text",value:l.mediCalPlan,onChange:e=>u("mediCalPlan",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,t.jsx)("input",{type:"tel",value:l.phone,onChange:e=>u("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",value:l.address,onChange:e=>u("address",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Language"}),(0,t.jsx)("input",{type:"text",value:l.language,onChange:e=>u("language",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:["ECM Population of Focus",(0,t.jsx)("span",{className:"text-sm font-normal text-gray-600 ml-2",children:"(Select all that apply)"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.keys(d).map(e=>{let i=d[e],s=l.populationsOfFocus.includes(e);return(0,t.jsxs)("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,t.jsx)("input",{type:"checkbox",checked:s,onChange:()=>{c(t=>({...t,populationsOfFocus:t.populationsOfFocus.includes(e)?t.populationsOfFocus.filter(t=>t!==e):[...t.populationsOfFocus,e]}))},className:"mt-1 h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-sm text-gray-900",children:i.name}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:i.description})]})]},e)})})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:["Supporting Clinical Evidence",(0,t.jsx)("span",{className:"text-sm font-normal text-blue-600 ml-2",children:"(Auto-extracted from notes)"})]}),m.length>0?(0,t.jsx)("ul",{className:"space-y-2",children:m.map((e,i)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-blue-500 font-bold",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-gray-700 italic",children:['"',e,'"']})]},i))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No supporting evidence extracted."})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:["Complex Social Factors Present",(0,t.jsx)("span",{className:"text-sm font-normal text-blue-600 ml-2",children:"(Auto-detected)"})]}),p.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map((e,i)=>(0,t.jsx)("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm",children:e},i))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No complex social factors identified."})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Referring Provider Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider Name"}),(0,t.jsx)("input",{type:"text",value:l.referringProvider,onChange:e=>u("referringProvider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referral Date"}),(0,t.jsx)("input",{type:"date",value:l.referralDate,onChange:e=>u("referralDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,t.jsx)("input",{type:"tel",value:l.referringProviderPhone,onChange:e=>u("referringProviderPhone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fax"}),(0,t.jsx)("input",{type:"tel",value:l.referringProviderFax,onChange:e=>u("referringProviderFax",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Additional Notes"}),(0,t.jsx)("textarea",{value:l.additionalNotes,onChange:e=>u("additionalNotes",e.target.value),placeholder:"Enter any additional information relevant to this referral...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-between","data-print-hidden":!0,children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Form auto-populated by Whole Person Navigator. Please verify all information before submission."}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"Print / Save PDF"})})]})]})})}let b=[{id:"bathing",label:"Bathing",description:"Assistance with bathing or showering"},{id:"dressing",label:"Dressing",description:"Help putting on and removing clothing"},{id:"grooming",label:"Grooming",description:"Hair care, shaving, oral hygiene"},{id:"feeding",label:"Feeding",description:"Assistance with eating meals"},{id:"toileting",label:"Toileting",description:"Help with toilet use and hygiene"},{id:"transferring",label:"Transferring",description:"Moving in and out of bed or chair"},{id:"mobility",label:"Mobility",description:"Walking or moving around the home"},{id:"meal_prep",label:"Meal Preparation",description:"Cooking and preparing meals"},{id:"housework",label:"Housework",description:"Cleaning, laundry, and maintenance"},{id:"shopping",label:"Shopping/Errands",description:"Grocery shopping and errands"},{id:"medication",label:"Medication Management",description:"Reminders and assistance with medications"}];function f({patientData:e,onClose:s}){let a=(0,i.useRef)(null),{patient:r,risks:n}=e,o=[];n.forEach(e=>{e.citations.forEach(e=>{let t=e.text.toLowerCase();(t.includes("bathing")||t.includes("bath"))&&o.push("bathing"),(t.includes("dressing")||t.includes("dress"))&&o.push("dressing"),(t.includes("feeding")||t.includes("eating")||t.includes("meals"))&&o.push("feeding"),(t.includes("toileting")||t.includes("toilet"))&&o.push("toileting"),(t.includes("transferring")||t.includes("transfer"))&&o.push("transferring"),(t.includes("mobility")||t.includes("walking")||t.includes("balance"))&&o.push("mobility"),(t.includes("meal prep")||t.includes("preparing meals")||t.includes("cook"))&&o.push("meal_prep"),(t.includes("housework")||t.includes("cleaning")||t.includes("laundry"))&&o.push("housework"),(t.includes("medication")||t.includes("pills"))&&o.push("medication")})});let l=[...new Set(o)],[d,c]=(0,i.useState)({patientName:`${r.lastName}, ${r.firstName}`,dob:r.dateOfBirth,mrn:r.mrn,mediCalId:r.mrn,ssn:"XXX-XX-XXXX",phone:r.demographics.phone,address:r.demographics.address,livingArrangement:"Lives alone",adlNeeds:l,referringProvider:r.referringProvider,referralDate:new Date().toISOString().split("T")[0],medicalConditions:"",additionalNotes:""}),m=n.filter(e=>"high"===e.severity||"moderate"===e.severity).flatMap(e=>e.citations).filter(e=>{let t=e.text.toLowerCase();return b.some(e=>t.includes(e.id)||t.includes(e.label.toLowerCase())||t.includes("assistance")||t.includes("help with")||t.includes("needs help"))}).map(e=>e.text).slice(0,5),p=(e,t)=>{c(i=>({...i,[e]:t}))},u=()=>{window.print()};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,t.jsxs)("div",{ref:a,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"IHSS Referral Form"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"In-Home Supportive Services Program Referral"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2","data-print-hidden":!0,children:[(0,t.jsx)("button",{onClick:u,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors text-sm font-medium",children:"Print / Save PDF"}),s&&(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm font-medium",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Applicant Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Applicant Name"}),(0,t.jsx)("input",{type:"text",value:d.patientName,onChange:e=>p("patientName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,t.jsx)("input",{type:"date",value:d.dob,onChange:e=>p("dob",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medi-Cal ID"}),(0,t.jsx)("input",{type:"text",value:d.mediCalId,onChange:e=>p("mediCalId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,t.jsx)("input",{type:"tel",value:d.phone,onChange:e=>p("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",value:d.address,onChange:e=>p("address",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Living Arrangement"}),(0,t.jsxs)("select",{value:d.livingArrangement,onChange:e=>p("livingArrangement",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500",children:[(0,t.jsx)("option",{value:"Lives alone",children:"Lives alone"}),(0,t.jsx)("option",{value:"Lives with spouse/partner",children:"Lives with spouse/partner"}),(0,t.jsx)("option",{value:"Lives with family member",children:"Lives with family member"}),(0,t.jsx)("option",{value:"Lives with non-relative",children:"Lives with non-relative"}),(0,t.jsx)("option",{value:"Board and care",children:"Board and care"})]})]})]})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:["Activities of Daily Living (ADL) Assistance Needed",(0,t.jsx)("span",{className:"text-sm font-normal text-purple-600 ml-2",children:"(Auto-detected from notes)"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:b.map(e=>{let i=d.adlNeeds.includes(e.id),s=l.includes(e.id);return(0,t.jsxs)("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${i?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,t.jsx)("input",{type:"checkbox",checked:i,onChange:()=>{var t;return t=e.id,void c(e=>({...e,adlNeeds:e.adlNeeds.includes(t)?e.adlNeeds.filter(e=>e!==t):[...e.adlNeeds,t]}))},className:"mt-1 h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm text-gray-900",children:e.label}),s&&(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full",children:"Auto-detected"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]})]},e.id)})})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:["Supporting Documentation",(0,t.jsx)("span",{className:"text-sm font-normal text-purple-600 ml-2",children:"(From clinical notes)"})]}),m.length>0?(0,t.jsx)("ul",{className:"space-y-2",children:m.map((e,i)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-purple-500 font-bold",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-gray-700 italic",children:['"',e,'"']})]},i))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No supporting documentation extracted."})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Relevant Medical Conditions"}),(0,t.jsx)("textarea",{value:d.medicalConditions,onChange:e=>p("medicalConditions",e.target.value),placeholder:"List relevant medical conditions that impact ability to perform ADLs...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Referring Provider"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider Name"}),(0,t.jsx)("input",{type:"text",value:d.referringProvider,onChange:e=>p("referringProvider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referral Date"}),(0,t.jsx)("input",{type:"date",value:d.referralDate,onChange:e=>p("referralDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]})]})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Additional Notes"}),(0,t.jsx)("textarea",{value:d.additionalNotes,onChange:e=>p("additionalNotes",e.target.value),placeholder:"Enter any additional information relevant to this IHSS referral...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-purple-500 focus:border-purple-500"})]})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-between","data-print-hidden":!0,children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Form auto-populated by Whole Person Navigator. An IHSS social worker will conduct an in-home assessment."}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("button",{onClick:u,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors text-sm font-medium",children:"Print / Save PDF"})})]})]})})}let y=[{id:"diabetes",label:"Diabetes",description:"Type 1 or Type 2 diabetes"},{id:"heart_disease",label:"Heart Disease",description:"Cardiovascular conditions"},{id:"hypertension",label:"Hypertension",description:"High blood pressure"},{id:"kidney_disease",label:"Kidney Disease",description:"Chronic kidney disease or renal failure"},{id:"pregnancy",label:"Pregnancy/Postpartum",description:"Currently pregnant or recently postpartum"},{id:"other",label:"Other Condition",description:"Other nutrition-sensitive condition"}];function v({patientData:e,onClose:s}){let a=(0,i.useRef)(null),{patient:r,risks:n,notes:o}=e,l=[];o.forEach(e=>{let t=e.content.toLowerCase();(t.includes("diabetes")||t.includes("a1c")||t.includes("glycemic"))&&l.push("diabetes"),(t.includes("heart")||t.includes("cardiovascular")||t.includes("chf"))&&l.push("heart_disease"),(t.includes("hypertension")||t.includes("blood pressure"))&&l.push("hypertension"),(t.includes("kidney")||t.includes("renal"))&&l.push("kidney_disease"),(t.includes("pregnant")||t.includes("postpartum")||t.includes("gestational"))&&l.push("pregnancy")});let d=[...new Set(l)],[c,m]=(0,i.useState)({patientName:`${r.lastName}, ${r.firstName}`,dob:r.dateOfBirth,mrn:r.mrn,ssn:"XXX-XX-XXXX",phone:r.demographics.phone,address:r.demographics.address,householdSize:"1",monthlyIncome:"",nutritionConditions:d,referringProvider:r.referringProvider,referralDate:new Date().toISOString().split("T")[0],additionalNotes:""}),p=n.filter(e=>"food_insecurity"===e.domain).flatMap(e=>e.citations.map(e=>e.text)).slice(0,5),u=n.filter(e=>"financial_strain"===e.domain).flatMap(e=>e.citations.map(e=>e.text)).slice(0,3),h=(e,t)=>{m(i=>({...i,[e]:t}))},g=()=>{window.print()};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,t.jsxs)("div",{ref:a,className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"SNAP Benefits Application"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Supplemental Nutrition Assistance Program"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2","data-print-hidden":!0,children:[(0,t.jsx)("button",{onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium",children:"Print / Save PDF"}),s&&(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm font-medium",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Applicant Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Applicant Name"}),(0,t.jsx)("input",{type:"text",value:c.patientName,onChange:e=>h("patientName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),(0,t.jsx)("input",{type:"date",value:c.dob,onChange:e=>h("dob",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,t.jsx)("input",{type:"tel",value:c.phone,onChange:e=>h("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Household Size"}),(0,t.jsxs)("select",{value:c.householdSize,onChange:e=>h("householdSize",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500",children:[(0,t.jsx)("option",{value:"1",children:"1 person"}),(0,t.jsx)("option",{value:"2",children:"2 people"}),(0,t.jsx)("option",{value:"3",children:"3 people"}),(0,t.jsx)("option",{value:"4",children:"4 people"}),(0,t.jsx)("option",{value:"5",children:"5 people"}),(0,t.jsx)("option",{value:"6+",children:"6+ people"})]})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",value:c.address,onChange:e=>h("address",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Household Income (estimated)"}),(0,t.jsx)("input",{type:"text",value:c.monthlyIncome,onChange:e=>h("monthlyIncome",e.target.value),placeholder:"$0.00",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500"})]})]})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:["Nutrition-Sensitive Medical Conditions",(0,t.jsx)("span",{className:"text-sm font-normal text-green-600 ml-2",children:"(Auto-detected from notes)"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:y.map(e=>{let i=c.nutritionConditions.includes(e.id),s=d.includes(e.id);return(0,t.jsxs)("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${i?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,t.jsx)("input",{type:"checkbox",checked:i,onChange:()=>{var t;return t=e.id,void m(e=>({...e,nutritionConditions:e.nutritionConditions.includes(t)?e.nutritionConditions.filter(e=>e!==t):[...e.nutritionConditions,t]}))},className:"mt-1 h-4 w-4 text-green-600 rounded focus:ring-green-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm text-gray-900",children:e.label}),s&&(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full",children:"Auto-detected"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]})]},e.id)})})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:["Food Insecurity Evidence",(0,t.jsx)("span",{className:"text-sm font-normal text-green-600 ml-2",children:"(From clinical notes)"})]}),p.length>0?(0,t.jsx)("ul",{className:"space-y-2",children:p.map((e,i)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-green-500 font-bold",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-gray-700 italic",children:['"',e,'"']})]},i))}):(0,t.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No food insecurity evidence documented."})]}),u.length>0&&(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:["Financial Strain Evidence",(0,t.jsx)("span",{className:"text-sm font-normal text-green-600 ml-2",children:"(From clinical notes)"})]}),(0,t.jsx)("ul",{className:"space-y-2",children:u.map((e,i)=>(0,t.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-green-500 font-bold",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-gray-700 italic",children:['"',e,'"']})]},i))})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Referring Provider"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider Name"}),(0,t.jsx)("input",{type:"text",value:c.referringProvider,onChange:e=>h("referringProvider",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Referral Date"}),(0,t.jsx)("input",{type:"date",value:c.referralDate,onChange:e=>h("referralDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500"})]})]})]}),(0,t.jsxs)("section",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Additional Notes"}),(0,t.jsx)("textarea",{value:c.additionalNotes,onChange:e=>h("additionalNotes",e.target.value),placeholder:"Enter any additional information relevant to this SNAP application...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-green-500 focus:border-green-500"})]})]}),(0,t.jsxs)("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex items-center justify-between","data-print-hidden":!0,children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Form auto-populated by Whole Person Navigator. Additional verification may be required."}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("button",{onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium",children:"Print / Save PDF"})})]})]})})}function N({gaps:e}){if(0===e.length)return null;let i=e.filter(e=>"high"===e.priority),s=e.filter(e=>"medium"===e.priority);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Assessment Gaps"}),(0,t.jsxs)("span",{className:"text-sm text-amber-600 font-medium",children:[e.length," domain",1!==e.length?"s":""," not yet assessed"]})]}),(0,t.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-amber-500 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"text-sm text-amber-800",children:"Based on this patient's clinical profile, the following social determinant domains have not been assessed and may represent care gaps requiring targeted screening."})})]})}),i.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-red-700",children:"High Priority - Recommend Immediate Screening"}),(0,t.jsx)("div",{className:"space-y-2",children:i.map(e=>(0,t.jsx)("div",{className:"border-l-4 border-red-400 bg-red-50 rounded-r-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium text-gray-900",children:e.domainName}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.reason}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Clinical context:"})," ",e.clinicalContext]})]}),(0,t.jsx)("span",{className:"flex-shrink-0 px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"Not Assessed"})]})},e.domain))})]}),s.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-amber-700",children:"Medium Priority - Consider Screening"}),(0,t.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,t.jsx)("div",{className:"border-l-4 border-amber-400 bg-amber-50 rounded-r-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"font-medium text-gray-900",children:e.domainName}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.reason}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,t.jsx)("span",{className:"font-medium",children:"Clinical context:"})," ",e.clinicalContext]})]}),(0,t.jsx)("span",{className:"flex-shrink-0 px-2 py-1 bg-amber-100 text-amber-700 rounded text-xs font-medium",children:"Not Assessed"})]})},e.domain))})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 italic mt-4",children:"Assessment gaps are identified based on the patient's diagnoses, clinical complexity, and care intensity. Absence of documented screening in these domains may indicate missed opportunities for intervention."})]})}let j={diabetes:{domains:["food_insecurity","financial_strain","transportation"],reason:"Diabetes management requires consistent nutrition and medication access"},"heart failure":{domains:["food_insecurity","financial_strain","social_isolation"],reason:"CHF patients need dietary management and medication adherence support"},chf:{domains:["food_insecurity","financial_strain","social_isolation"],reason:"CHF patients need dietary management and medication adherence support"},hypertension:{domains:["food_insecurity","financial_strain"],reason:"Blood pressure management requires dietary modifications and medication access"},"medication non-adherence":{domains:["financial_strain","food_insecurity","transportation"],reason:"Non-adherence often indicates barriers to accessing medications or prioritizing health"},"medication nonadherence":{domains:["financial_strain","food_insecurity","transportation"],reason:"Non-adherence often indicates barriers to accessing medications or prioritizing health"},psychiatric:{domains:["social_isolation","housing","financial_strain"],reason:"Mental health conditions increase risk of social and housing instability"},schizophrenia:{domains:["social_isolation","housing","financial_strain","food_insecurity"],reason:"Severe mental illness requires comprehensive social support assessment"},bipolar:{domains:["social_isolation","housing","financial_strain"],reason:"Mood disorders can impact housing stability and social connections"},depression:{domains:["social_isolation","safety_concerns"],reason:"Depression screening should include social support and safety assessment"},postpartum:{domains:["safety_concerns","social_isolation","food_insecurity"],reason:"Postpartum period requires assessment of safety, support, and nutrition"},pregnant:{domains:["food_insecurity","safety_concerns","housing"],reason:"Pregnancy requires stable housing, nutrition, and safety assessment"},"frequent ed":{domains:["transportation","housing","financial_strain"],reason:"High ED utilization often indicates unmet social needs"},elderly:{domains:["social_isolation","safety_concerns","food_insecurity"],reason:"Older adults need assessment of fall risk, isolation, and nutrition"},"substance use":{domains:["housing","safety_concerns","social_isolation"],reason:"Substance use disorders require comprehensive social determinants assessment"}},w={housing:"Housing Stability",transportation:"Transportation Access",substance_use:"Substance Use",medical_equipment:"Medical Equipment Needs",food_insecurity:"Food Security",financial_strain:"Financial Strain",social_isolation:"Social Support",safety_concerns:"Safety/Domestic Violence"};function C({patientData:e}){let r,n,l,d,c,m,u,b,[y,C]=(0,i.useState)(null),[k,P]=(0,i.useState)("overview"),{patient:D,notes:S,risks:_}=e,M=[function(e){let t=[],i=[];if(!(e.patient.mediCalPlan&&e.patient.mediCalPlan.length>0))return{program:"ecm",eligible:!1,confidence:"high",qualifyingFactors:[],supportingEvidence:["Patient does not have Medi-Cal managed care plan"]};if(e.ecmPopulations.includes("homeless")){t.push("Experiencing homelessness");let s=e.risks.find(e=>"housing"===e.domain);s&&i.push(...s.citations.map(e=>e.text))}if(e.ecmPopulations.includes("high_ed_utilization")&&t.push("High ED/hospital utilization (5+ ED visits or 3+ admissions)"),e.ecmPopulations.includes("serious_mental_health_sud")){t.push("Serious mental health or substance use disorder");let s=e.risks.find(e=>"substance_use"===e.domain);s&&i.push(...s.citations.map(e=>e.text))}return e.ecmPopulations.includes("transitioning_incarceration")&&t.push("Transitioning from incarceration"),e.ecmPopulations.includes("ltc_risk")&&t.push("At risk for long-term care institutionalization"),e.ecmPopulations.includes("nursing_facility_transition")&&t.push("Nursing facility resident transitioning to community"),e.ecmPopulations.includes("child_welfare")&&t.push("Child welfare system involvement"),e.ecmPopulations.includes("birth_equity")&&t.push("Birth equity population (pregnant/postpartum with disparities)"),{program:"ecm",eligible:t.length>0,confidence:t.length>=2?"high":1===t.length?"medium":"low",qualifyingFactors:t,supportingEvidence:i}}(e),(r=[],n=[],(l=e.risks.some(e=>{let t=e.citations.map(e=>e.text.toLowerCase()).join(" ");return t.includes("adl")||t.includes("activities of daily living")||t.includes("bathing")||t.includes("dressing")||t.includes("feeding")||t.includes("toileting")||t.includes("transferring")||t.includes("mobility")||t.includes("assistance with")||t.includes("needs help with")||t.includes("unable to care for")}))&&(r.push("Requires assistance with Activities of Daily Living (ADLs)"),e.risks.forEach(e=>{e.citations.forEach(e=>{(e.text.toLowerCase().includes("adl")||e.text.toLowerCase().includes("assistance")||e.text.toLowerCase().includes("help with")||e.text.toLowerCase().includes("unable to care for"))&&n.push(e.text)})})),(d=!e.risks.some(e=>{let t=e.citations.map(e=>e.text.toLowerCase()).join(" ");return t.includes("nursing facility")||t.includes("snf")||t.includes("skilled nursing")}))&&l&&r.push("Lives in community setting"),(c=!!(e.patient.mediCalPlan&&e.patient.mediCalPlan.length>0))&&r.push("Medi-Cal eligible"),(m=e.patient.demographics.age>=65)&&r.push("Age 65 or older"),(u=e.ecmPopulations.includes("birth_equity"))&&l&&r.push("Postpartum with functional limitations"),{program:"ihss",eligible:b=l&&d&&c,confidence:b&&(m||u)?"high":b?"medium":"low",qualifyingFactors:r,supportingEvidence:n}),function(e){let t=[],i=[],s=e.notes.some(e=>{let t=e.content.toLowerCase();return a.some(e=>t.includes(e.toLowerCase()))});s&&(t.push("Has nutrition-sensitive medical condition"),e.notes.forEach(e=>{a.forEach(t=>{e.content.toLowerCase().includes(t.toLowerCase())&&i.push(`Clinical note mentions ${t}`)})}));let r=e.risks.some(e=>"food_insecurity"===e.domain);if(r){t.push("Food insecurity identified");let s=e.risks.find(e=>"food_insecurity"===e.domain);s&&i.push(...s.citations.map(e=>e.text))}let n=e.risks.some(e=>"financial_strain"===e.domain);n&&t.push("Financial strain may impact nutrition");let o=s&&(r||n);return{program:"snap_benefits",eligible:o,confidence:r&&s?"high":o?"medium":"low",qualifyingFactors:t,supportingEvidence:[...new Set(i)]}}(e)],A=function(e){let t=[],i=new Set(e.risks.map(e=>e.domain)),s=e.notes.map(e=>e.content.toLowerCase()).join(" "),a=new Map;for(let[e,t]of Object.entries(j))if(s.includes(e.toLowerCase()))for(let i of t.domains){a.has(i)||a.set(i,{reasons:[],contexts:[]});let s=a.get(i);s.reasons.includes(t.reason)||(s.reasons.push(t.reason),s.contexts.push(e))}if(e.patient.demographics.age>=65){let e=j.elderly;for(let t of e.domains){a.has(t)||a.set(t,{reasons:[],contexts:[]});let i=a.get(t);i.reasons.includes(e.reason)||(i.reasons.push(e.reason),i.contexts.push("Age 65+"))}}if(s.includes("ed visit")&&(s.includes("frequent")||s.includes("multiple")||s.match(/\d+\s*(ed|emergency)\s*visit/))){let e=j["frequent ed"];for(let t of e.domains){a.has(t)||a.set(t,{reasons:[],contexts:[]});let i=a.get(t);i.reasons.includes(e.reason)||(i.reasons.push(e.reason),i.contexts.push("High ED utilization"))}}if(e.ecmPopulations.includes("birth_equity")){let e=j.postpartum;for(let t of e.domains){a.has(t)||a.set(t,{reasons:[],contexts:[]});let i=a.get(t);i.reasons.includes(e.reason)||(i.reasons.push(e.reason),i.contexts.push("Postpartum/Birth equity population"))}}if(e.ecmPopulations.includes("homeless"))for(let e of["food_insecurity","safety_concerns","transportation"]){a.has(e)||a.set(e,{reasons:[],contexts:[]});let t=a.get(e),i="Homelessness increases risk across multiple social domains";t.reasons.includes(i)||(t.reasons.push(i),t.contexts.push("Experiencing homelessness"))}for(let[e,s]of a)if(!i.has(e)){let i=s.reasons.length>=2||s.contexts.some(e=>e.includes("non-adherence")||e.includes("diabetes")||e.includes("homeless"))?"high":"medium";t.push({domain:e,domainName:w[e],reason:s.reasons[0],clinicalContext:s.contexts.join(", "),priority:i})}return t.sort((e,t)=>"high"===e.priority&&"medium"===t.priority?-1:+("medium"===e.priority&&"high"===t.priority)),t}(e);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)(s.default,{href:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Whole Person Navigator"})})]})}),(0,t.jsx)(o,{currentPatientId:D.id})]})})}),(0,t.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:[D.firstName," ",D.lastName]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:["DOB: ",D.dateOfBirth]}),(0,t.jsx)("span",{className:"text-gray-300",children:"|"}),(0,t.jsxs)("span",{children:["MRN: ",D.mrn]}),(0,t.jsx)("span",{className:"text-gray-300",children:"|"}),(0,t.jsxs)("span",{children:["Age: ",D.demographics.age]}),(0,t.jsx)("span",{className:"text-gray-300",children:"|"}),(0,t.jsx)("span",{children:D.demographics.gender})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2 text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Medi-Cal Plan:"}),(0,t.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs",children:D.mediCalPlan})]})]})})})}),(0,t.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("nav",{className:"flex gap-8",children:[(0,t.jsx)("button",{onClick:()=>P("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"overview"===k?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),(0,t.jsxs)("button",{onClick:()=>P("notes"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${"notes"===k?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Clinical Notes (",S.length,")"]})]})})}),(0,t.jsxs)("main",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===k&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Demographics"}),(0,t.jsxs)("dl",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Race"}),(0,t.jsx)("dd",{className:"text-gray-900",children:D.demographics.race})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Ethnicity"}),(0,t.jsx)("dd",{className:"text-gray-900",children:D.demographics.ethnicity})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Language"}),(0,t.jsx)("dd",{className:"text-gray-900",children:D.demographics.language})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Phone"}),(0,t.jsx)("dd",{className:"text-gray-900",children:D.demographics.phone})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-gray-500 mb-1",children:"Address"}),(0,t.jsx)("dd",{className:"text-gray-900 text-xs bg-gray-50 p-2 rounded",children:D.demographics.address})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Care Team"}),(0,t.jsxs)("dl",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Primary Care Provider"}),(0,t.jsx)("dd",{className:"text-gray-900 font-medium",children:D.primaryCareProvider})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-gray-500",children:"Referring Provider"}),(0,t.jsx)("dd",{className:"text-gray-900 font-medium",children:D.referringProvider})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,t.jsx)(h,{eligibility:M,onGenerateReferral:e=>{"ecm"===e?C("ecm"):"ihss"===e?C("ihss"):"snap_benefits"===e&&C("snap_benefits")}})}),A.length>0&&(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,t.jsx)(N,{gaps:A})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,t.jsx)(p,{risks:_})})}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,t.jsx)(g,{risks:_})})})]}),"notes"===k&&(0,t.jsx)("div",{className:"space-y-6",children:S.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-100",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.type}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.provider," | ",e.date]})]}),(0,t.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:e.type})]}),(0,t.jsx)("div",{className:"prose prose-sm max-w-none text-gray-700 whitespace-pre-wrap",children:e.content})]},e.id))})]}),"ecm"===y&&(0,t.jsx)(x,{patientData:e,onClose:()=>C(null)}),"ihss"===y&&(0,t.jsx)(f,{patientData:e,onClose:()=>C(null)}),"snap_benefits"===y&&(0,t.jsx)(v,{patientData:e,onClose:()=>C(null)})]})}e.s(["default",()=>C],56352)}]);